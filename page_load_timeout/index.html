<html>

<head>
    <title>Delayed Ready State</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body style="background-color:lightgray;">
    <div id="messages">
        <p>This page will hold open for 60s</p>
    </div>
    <script>
        const start = Date.now();
        function updateMessages(message) {
            let oldText = document.getElementById('messages').innerHTML
            document.getElementById('messages').innerHTML = oldText + message
        }

        function holdThread(timeInMS) {
            while (Date.now() - start < timeInMS) {
                // Do nothing to block the thread 
            }
        }

        document.addEventListener('readystatechange', e => {
            if (document.readyState === "interactive") {
                const millis = Date.now() - start;
                updateMessages("<p>readyState interactive after: " + millis + "ms </p>");

            }
            if (document.readyState === "complete") {
                const millis = Date.now() - start;
                updateMessages("<p>readyState complete after: " + millis + "ms </p>");
            }
        });
        document.addEventListener('DOMContentLoaded', function () {
            const millis = Date.now() - start;
            updateMessages("<p>DOMContentLoaded complete after: " + millis + "ms </p>");
            holdThread(30000);
        });

    </script>
</body>

</html>